package:
  name: samba
  version: 4.19.4
  epoch: 0
  description: "Tools to access a server's filespace and printers via SMB"
  copyright:
    - license: GPL-3.0-or-later AND LGPL-3.0-or-later

environment:
  contents:
    packages:
      - acl-dev
      - autoconf
      - automake
      - bind-dev
      - bison
      - build-base
      - busybox
      - cups-dev
      - dbus-dev
      - docbook-xml
      - e2fsprogs-dev
      - flex
      - gnutls-dev
      - iniparser-dev
      - jansson-dev
      - ldb-dev
      - libarchive-dev
      - libcap-dev
      - libtirpc-dev
      - liburing-dev
      - linux-pam-dev
      - ncurses-dev
      - openldap-dev
      - perl
      - perl-json
      - perl-parse-yapp
      - popt-dev
      - py3-dnspython
      - py3-ldb
      - py3-markdown
      - py3-tdb
      - py3-tevent
      - python3-dev
      - rpcgen
      - subunit-dev
      - talloc-dev
      - tdb
      - tdb-dev
      - tevent-dev
      - zlib-dev
  environment:
    IDMAP_MODULES: idmap_ad,idmap_rid,idmap_adex,idmap_hash,idmap_tdb2
    PDB_MODULES: pdb_tdbsam,pdb_ldap,pdb_ads,pdb_smbpasswd,pdb_wbc_sam,pdb_samba4
    AUTH_MODULES: auth_unix,auth_wbc,auth_server,auth_netlogond,auth_script,auth_samba4

pipeline:
  - uses: fetch
    with:
      expected-sha256: 4026d93b866db198c8ca1685b0f5d52793f65c6e63cb364163af661fdff0968c
      uri: https://download.samba.org/pub/samba/stable/samba-${{package.version}}.tar.gz

  - uses: patch
    with:
      patches: tinfo.patch

  - uses: autoconf/configure
    with:
      opts: |
        --prefix=/usr \
        --sysconfdir=/etc/${{package.name}} \
        --with-configdir=/etc/${{package.name}} \
        --localstatedir=/var \
        --libexecdir=/usr/lib \
        --enable-fhs \
        --with-lockdir=/var/cache/${{package.name}} \
        --with-piddir=/run/${{package.name}} \
        --with-logfilebase=/var/log/${{package.name}} \
        --with-pam \
        --without-systemd \
        --with-ads \
        --with-shared-modules="$IDMAP_MODULES,$PDB_MODULES,$AUTH_MODULES,vfs_io_uring" \
        --enable-cups \
        --without-gettext \
        --bundled-libraries=NONE,ntdb,roken,wind,hx509,asn1,heimbase,hcrypto,krb5,gssapi,heimntlm,hdb,kdc,cmocka \
        --disable-rpath-install \
        --without-gpgme \
        --disable-fault-handling

  - uses: autoconf/make

  - uses: autoconf/make-install

  - uses: strip

subpackages:
  - name: samba-common
    description: Samba common files for both client an servers
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/etc
          mv "${{targets.destdir}}"/etc/* "${{targets.contextdir}}"/etc

  - name: samba-dev
    pipeline:
      - uses: split/dev
    dependencies:
      runtime:
        - samba
    description: samba dev

  - name: samba-libs-py3
    description: Samba libraries that require libpython
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsamba-net*samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsamba-python*samba4.so "${{targets.contextdir}}"/usr/lib/samba

  - name: samba-common-tools
    description: Tools for Samba servers and clients
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/bin

          mv "${{targets.destdir}}"/usr/bin/net "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/pdbedit "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/profiles "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/smbcontrol "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/smbpasswd "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/testparm "${{targets.contextdir}}"/usr/bin

  - name: samba-common-server-libs
    description: Samba libraries shared by common-tools and servers
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/lib/samba

          mv "${{targets.destdir}}"/usr/lib/libdcerpc-server-core.so.* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libnetapi.so.* "${{targets.contextdir}}"/usr/lib

          mv "${{targets.destdir}}"/usr/lib/samba/libRPC-SERVER-LOOP-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libdfs-server-ad-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libprinting-migrate-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsmbd-base-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsmbldaphelper-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/pdb "${{targets.contextdir}}"/usr/lib/samba

  - name: libsmbclient
    description: The SMB client library
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libsmbclient.so.* "${{targets.contextdir}}"/usr/lib

  - name: samba-client
    description: Samba client programs
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/bin

          ls -lah "${{targets.destdir}}"/usr/bin/

          mv "${{targets.destdir}}"/usr/bin/cifsdd "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/dumpmscat "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/dbwrap_tool "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/mdsearch "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/mvxattr "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/nmblookup "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/oLschema2ldif "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/regdiff "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/regpatch "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/regshell "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/regtree "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/rpcclient "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/samba-regedit "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/sharesec "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/smbcacls "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/smbclient "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/smbcquotas "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/smbget "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/smbspool "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/smbtar "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/smbtree "${{targets.contextdir}}"/usr/bin

          mkdir -p "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/samba/smbspool_krb5_wrapper "${{targets.contextdir}}"/usr/lib

  - name: samba-server-libs
    description: Samba libraries shared by server and windbind
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libdcerpc-samba4.so "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/samba/libidmap-samba4.so "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/samba/libnss-info-samba4.so "${{targets.contextdir}}"/usr/lib

  - name: winbind
    description: Samba user and group resolver
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/lib/samba
          mkdir -p "${{targets.contextdir}}"/usr/sbin

          mv "${{targets.destdir}}"/usr/sbin/winbindd "${{targets.contextdir}}"/usr/sbin
          mv "${{targets.destdir}}"/usr/lib/samba/idmap "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/nss_info "${{targets.contextdir}}"/usr/lib/samba

  - name: samba-util-libs
    description: Samba utility libraries
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/lib/samba

          mv "${{targets.destdir}}"/usr/lib/libsamba-util.so.* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/samba/libgenrand-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsocket-blocking-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsamba-debug-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libtime-basic-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsys-rw-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libiov-buf-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libcom-err-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libreplace-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libstable-sort-samba4.so "${{targets.contextdir}}"/usr/lib/samba

  - name: libwbclient
    description: Samba winbind client libraries
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libwbclient.so.* "${{targets.contextdir}}"/usr/lib

  - name: samba-winbind-clients
    description: Samba winbind client tools
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/ntlm_auth "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/wbinfo "${{targets.contextdir}}"/usr/bin

  - name: samba-libnss-winbind
    description: Samba winbind NSS plugin
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libnss_winbind.so* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libnss_wins.so* "${{targets.contextdir}}"/usr/lib

  - name: samba-winbind-krb5-locator
    description: Samba winbind krb5 locator
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/krb5 "${{targets.contextdir}}"/usr/lib/samba

  - name: samba-pam-winbind
    description: PAM module for winbind
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/lib/security
          mv "${{targets.destdir}}"/usr/lib/security/* "${{targets.contextdir}}"/lib/security

  - name: samba-server
    description: Samba server
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/sbin
          mkdir -p "${{targets.contextdir}}"/usr/bin
          mkdir -p "${{targets.contextdir}}"/usr/lib/samba

          mv "${{targets.destdir}}"/usr/sbin/nmbd "${{targets.contextdir}}"/usr/sbin
          mv "${{targets.destdir}}"/usr/sbin/smbd "${{targets.contextdir}}"/usr/sbin
          mv "${{targets.destdir}}"/usr/sbin/eventlogadm "${{targets.contextdir}}"/usr/sbin
          mv "${{targets.destdir}}"/usr/bin/smbstatus "${{targets.contextdir}}"/usr/bin

          mv "${{targets.destdir}}"/usr/lib/samba/auth "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libREG-FULL-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libRPC-WORKER-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libxattr-tdb-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/rpcd_* "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/samba-bgqd "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/samba-dcerpcd "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/vfs "${{targets.contextdir}}"/usr/lib/samba
    dependencies:
      runtime:
        - samba-common

  - name: py3-samba
    description: Samba python libraries
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/python* "${{targets.contextdir}}"/usr/lib
    dependencies:
      runtime:
        - py3-tdb

  - name: samba-test
    description: Samba server and client testing tools
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/bin
          mkdir -p "${{targets.contextdir}}"/usr/lib

          mv "${{targets.destdir}}"/usr/bin/gentest "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/locktest "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/masktest "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/ndrdump "${{targets.contextdir}}"/usr/bin
          mv "${{targets.destdir}}"/usr/bin/smbtorture "${{targets.contextdir}}"/usr/bin

          mv "${{targets.destdir}}"/usr/lib/samba/libdlz-bind9-for-torture-samba4.so "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/samba/libtorture-samba4.so "${{targets.contextdir}}"/usr/lib
    dependencies:
      runtime:
        - py3-tdb

  - name: libauth-samba
    description: Samba auth library shared by common-tools, server and clients
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libauth-samba4.so "${{targets.contextdir}}"/usr/lib/samba

  - name: samba-libs
    description: Samba core libraries shared by common-tools, server and clients
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/usr/lib/samba

          mv "${{targets.destdir}}"/usr/lib/samba/libasn1-samba4.so* "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libgssapi-samba4.so* "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libhcrypto-samba4.so* "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libheimbase-samba4.so* "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libheimntlm-samba4.so* "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libhx509-samba4.so* "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libkrb5-samba4.so* "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libroken-samba4.so* "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libwind-samba4.so* "${{targets.contextdir}}"/usr/lib/samba

          mv "${{targets.destdir}}"/usr/lib/samba/libCHARSET3-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libMESSAGING-SEND-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libMESSAGING-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libaddns-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libads-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libasn1util-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libauthkrb5-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libcli-cldap-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libcli-ldap-common-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libcli-nbt-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libcli-smb-common-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libcli-spoolss-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libcliauth-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libclidns-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libcluster-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libcmdline-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libcmocka-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libcommon-auth-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libdbwrap-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libdcerpc-pkt-auth-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libdcerpc-samba-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libevents-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libflag-mapping-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libgensec-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libgse-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libinterfaces-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libkrb5samba-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libldbsamba-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/liblibcli-lsa3-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/liblibcli-netlogon3-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/liblibsmb-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libmessages-dgm-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libmessages-util-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libmsghdr-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libmsrpc3-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libndr-samba-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libndr-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libnpa-tstream-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsamba-cluster-support-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsamba-modules-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsamba-security-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsamba-sockets-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsamba3-util-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsamdb-common-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsecrets3-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libserver-id-db-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libserver-role-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsmb-transport-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libsmbd-shim-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libtalloc-report-printf-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libtalloc-report-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libtdb-wrap-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libtrusts-util-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libutil-reg-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libutil-setid-samba4.so "${{targets.contextdir}}"/usr/lib/samba
          mv "${{targets.destdir}}"/usr/lib/samba/libutil-tdb-samba4.so "${{targets.contextdir}}"/usr/lib/samba

          mv "${{targets.destdir}}"/usr/lib/libdcerpc-binding.so.* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libndr-krb5pac.so.* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libndr-nbt.so.* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libndr-standard.so.* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libndr.so.* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libsamba-credentials.so.* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libsamba-errors.so.* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libsamba-hostconfig.so.* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libsamba-passdb.so.* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libsamdb.so.* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libsmbconf.so.* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libsmbldap.so.* "${{targets.contextdir}}"/usr/lib
          mv "${{targets.destdir}}"/usr/lib/libtevent-util.so.* "${{targets.contextdir}}"/usr/lib

update:
  enabled: true
  release-monitor:
    identifier: 4758
