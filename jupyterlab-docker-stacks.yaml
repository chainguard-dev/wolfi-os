package:
  name: jupyterlab-docker-stacks
  version: 4.26.0.20241101
  epoch: 0
  description: Ready-to-run images containing Jupyter applications
  copyright:
    - license: BSD-3-Clause
  dependencies:
    runtime:
    #TODO for testing
      - bash
      - busybox
      - coreutils

environment:
  contents:
    packages:
      - build-base

pipeline:
  - uses: fetch
    with:
      expected-sha256: 6c704b7b3f13e828d87de8b971b99721e46586fd3a8a547cf4e7b748cbe3d493
      uri: https://github.com/jupyter/docker-stacks/archive/ac8453913cafb6e4f23b9f2288c484620f97e999.tar.gz

subpackages:
  - name: ${{package.name}}-base-notebook
  - name: ${{package.name}}-minimal-notebook
  - name: ${{package.name}}-docker-stacks-foundation
    dependencies:
      runtime:
        - bzip2
        - ca-certificates-bundle
        - glibc-locales
        - tini
        - wget
        - glibc-locale-gen
    pipeline:
      - working-directory: images/docker-stacks-foundation
        runs: |
          mkdir -p ${{targets.contextdir}}/usr/bin/fix/
          chmod a+rx fix-permissions
          cp fix-permissions ${{targets.contextdir}}/usr/bin/fix/
