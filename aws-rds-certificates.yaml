package:
  name: aws-rds-certificates
  version: "20240712"
  epoch: 0
  description: AWS RDS CA certificates
  copyright:
    - license: Apache-2.0

environment:
  contents:
    packages:
      - busybox
      - ca-certificates-bundle
      - wget

pipeline:
  - runs: |
      mkdir -p "${{targets.destdir}}"/etc/ssl/certs
      wget https://truststore.pki.rds.amazonaws.com/global/global-bundle.pem -O "${{targets.destdir}}"/etc/ssl/certs/rds-global-bundle.pem

data:
  - name: _aws_regions
    items:
      us-east-1:
      us-east-2:
      us-west-1:
      us-west-2:
      af-south-1:
      ap-east-1:
      ap-south-2:
      ap-southeast-3:
      ap-southeast-4:
      ap-south-1:
      ap-northeast-3:
      ap-northeast-1:
      ap-northeast-2:
      ap-southeast-1:
      ap-southeast-2:
      ca-central-1:
      ca-west-1:
      eu-central-1:
      eu-west-1:
      eu-west-2:
      eu-south-1:
      eu-west-3:
      eu-south-2:
      eu-north-1:
      eu-central-2:
      il-central-1:
      me-south-1:
      me-central-1:
      sa-east-1:

subpackages:
  - range: _aws_regions
    name: aws-rds-certificates-${{range.key}}
    description: AWS RDS certificate for region ${{range.key}}
    pipeline:
      - runs: |
          mkdir -p "${{targets.contextdir}}"/etc/ssl/certs
          wget https://truststore.pki.rds.amazonaws.com/${{range.key}}/${{range.key}}-bundle.pem -O "${{targets.contextdir}}"/etc/ssl/certs/${{range.key}}-bundle.pem

update:
  enabled: false
