package:
  name: victoriametrics
  version: 1.102.1
  epoch: 0
  description: VictoriaMetrics is a fast, cost-effective, and scalable monitoring solution and time series database designed for high performance and reliability. It supports both single-server and clustered installations, providing flexibility for various deployment needs, and integrates well with tools like Grafana for data visualization.
  copyright:
    - license: Apache-2.0

pipeline:
  - uses: git-checkout
    with:
      expected-commit: 996b623585d1945a298d95d9e2ea4f055e2dcd2a
      repository: https://github.com/VictoriaMetrics/VictoriaMetrics
      tag: v${{package.version}}

subpackages:
  - name: ${{package.name}}-vmagent
    description: vmagent is a tiny agent which helps you collect metrics from various sources, relabel and filter the collected metrics and store them in VictoriaMetrics or any other storage systems via Prometheus remote_write protocol or via VictoriaMetrics remote_write protocol.
    pipeline:
      - uses: go/build
        with:
          ldflags: -extldflags "-static"
          toolchaintags: netgo,osusergo,nethttpomithttp2,musl
          packages: github.com/VictoriaMetrics/VictoriaMetrics/app/vmagent
          output: vmagent
    test:
      environment:
        contents:
          packages:
            - busybox
      pipeline:
        - name: Test the vmagent binary
          runs: |
            vmagent -help

update:
  enabled: true
  github:
    identifier: VictoriaMetrics/VictoriaMetrics
    strip-prefix: v
