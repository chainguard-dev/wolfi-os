#nolint:valid-pipeline-git-checkout-tag
package:
  name: tclap
  version: 1.2.5
  epoch: 0
  description: "Templatized command-line argument parser for C++"
  copyright:
    - license: LicenseRef-tclap
      license-path: COPYING

environment:
  contents:
    packages:
      - build-base
      - busybox
      - python3

pipeline:
  - uses: git-checkout
    with:
      # There is no web UI for this Git instance, you'll need to clone if if you
      # want to inspect the files and tags.
      repository: https://git.code.sf.net/p/tclap/code
      branch: v${{package.version}}
      expected-commit: 58c5c8ef24111072fc21fb723f8ab45d23395809

  - uses: cmake/configure
    with:
      opts: -DBUILD_DOC=OFF

  - uses: cmake/build

  - uses: cmake/install

# Example of some of the tag formats used:
# - v1.2.2, 1.4.0-rc1, rel-1-0-5, tclap-1-2-1-release
# We only want the non-beta releases here, which are prepended with a 'v'.
update:
  enabled: true
  git:
    tag-filter-prefix: v
    strip-prefix: v
