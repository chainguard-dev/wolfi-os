package:
  name: hardening-check
  version: "2.25.1"
  epoch: 1
  description: "Debian devscripts hardening-check"
  copyright:
    - license: GPL-2.0-or-later
  dependencies:
    runtime:
      - binutils

environment:
  contents:
    packages:
      - busybox

pipeline:
  - uses: git-checkout
    with:
      repository: https://salsa.debian.org/debian/devscripts.git
      tag: v${{package.version}}
      expected-commit: 0c91555a03783ba268fa0b0d781a3085b0edd990
      cherry-picks: |
        main/7bfe255e81877587b21c68323029ceca00944a0d: scripts/hardening-check.pl: Detect branch protection in ARM binaries

  - runs: |
      mkdir -p "${{targets.destdir}}"/usr/bin
      mv scripts/hardening-check.pl "${{targets.destdir}}"/usr/bin/hardening-check

update:
  enabled: true
  release-monitor:
    identifier: 5419

test:
  pipeline:
    # AUTOGENERATED
    - runs: |
        hardening-check -v
