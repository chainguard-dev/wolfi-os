package:
  name: ruby3.2-rack
  version: 3.0.8
  epoch: 0
  description: |
    Rack provides a minimal, modular and adaptable interface for developing
    web applications in Ruby. By wrapping HTTP requests and responses in
    the simplest way possible, it unifies and distills the API for web
    servers, web frameworks, and software in between (the so-called
    middleware) into a single method call.
  copyright:
    - license: MIT

environment:
  contents:
    packages:
      - ca-certificates-bundle
      - ruby-3.2
      - ruby-3.2-dev
      - build-base
      - busybox
      - git

pipeline:
  - uses: fetch
    with:
      README: 'CONFIRM WITH: curl -L https://github.com/rack/rack/archive/refs/tags/v3.0.8.tar.gz | sha256sum'
      expected-sha256: f4cf32bece433d81682590e953a50ecc97282d83b2c1acaea96a30f53feba8ea
      uri: https://github.com/rack/rack/archive/refs/tags/v${{package.version}}.tar.gz

  - uses: patch
    with:
      README: This is only required if the gemspec is using a signing key
      patches: patches/${{package.name}}.patch

  - uses: ruby/build
    with:
      gem: ${{vars.gem}}

  - uses: ruby/install
    with:
      gem: ${{vars.gem}}
      version: ${{package.version}}

  - uses: ruby/clean

vars:
  gem: rack

update:
  enabled: true
  github:
    identifier: rack/rack
    strip-prefix: v
    use-tag: true
