package:
  name: ragel
  version: 7.0.4
  description: Ragel is a state machine compiler that generates efficient parsers in C, C++, Objective-C, D, Java or Ruby from regular expressions and state charts, allowing developers to embed actions into the transitions and states of the state machine.
  copyright:
    - license: MIT
  dependencies:
    runtime:
      - build-base
      - busybox
      - glibc

environment:
  contents:
    repositories:
      - https://packages.wolfi.dev/os
    keyring:
      - https://packages.wolfi.dev/os/wolfi-signing.rsa.pub
    packages:
      - autoconf
      - automake
      - bash
      - build-base
      - busybox
      - clang-16
      - cmake
      - colm
      - gcc
      - libtool
      - sed

pipeline:
  - uses: fetch
    with:
      uri: https://www.colm.net/files/ragel/ragel-${{package.version}}.tar.gz 
      expected-sha512: effa7021f5ce854ab9d2346c6cd8105ad6cbcbbbf59023c9cc704dc9720969221c9eb1e2c776063fcb6375900d457183f63892505615a878fc52c0f238f6921c
  - uses: autoconf/configure
    name: Configure Ragel
    with:
      opts: |
        --with-colm=/opt/colm/colm \
        --disable-manual
  - uses: autoconf/make
    name: Build Ragel
  - name: Install Ragel
    runs: |
      set -x
      DESTDIR="${{targets.destdir}}" make install


update:
  enabled: true
  release-monitor:
    identifier: 12105
