package:
  name: kubectl-images
  version: 0.6.3
  epoch: 0
  description: Show container images used in the cluster.
  copyright:
    - license: MIT

pipeline:
  - uses: git-checkout
    with:
      repository: https://github.com/chenjiandongx/kubectl-images
      tag: v${{package.version}}
      expected-commit: 582899624f93be6e8728125396ab567ae914bd0d

  # NOTE: there's is no active releases for past 2 years but it's a single go file with small deps and given we always build using latest go, this should be good.
  - uses: go/build
    with:
      packages: ./cmd/main.go
      output: kubectl-images

update:
  enabled: true
  github:
    identifier: chenjiandongx/kubectl-images
    strip-prefix: v

test:
  pipeline:
    - name: basic test
      runs: |
        kubectl-images --version | grep ${{package.version}}
        kubectl-images --help
