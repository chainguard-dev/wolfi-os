package:
  name: osquery
  version: "5.15.0"
  epoch: 0
  description: Osquery is a TODO
  copyright:
    - license: Apache-2.0 AND GPL-2.0-or-later

environment:
  contents:
    packages:
      - build-base
      - busybox
      - ca-certificates-bundle
      - python3
      - bison
      - flex
      - make
      - cmake

pipeline:
  - uses: git-checkout
    with:
      repository: https://github.com/osquery/osquery
      tag: ${{package.version}}
      expected-commit: 6a8a7f7b2bba4c3de12731890ac538dee7e7228d

  - runs: |
      mkdir build && cd build
      cmake -DOSQUERY_TOOLCHAIN_SYSROOT=/usr/local/osquery-toolchain ..
# TODO FINISH THIS
  - uses: strip

update:
  enabled: true
  github:
    identifier: osquery/osquery

test:
  pipeline:
    - runs: |
        exit 1
