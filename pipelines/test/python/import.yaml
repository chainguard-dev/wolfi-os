name: Test that a Python library can be imported

needs:
  packages:
    - busybox

inputs:
  library:
    description: The Python library to attempt to import
    required: true

pipeline:
  - runs: |
      LIBRARY="${{inputs.library}}"
      OUTPUT=$(python -c "from $LIBRARY import app" 2>&1)
      if echo "$OUTPUT" | grep -q "No module named"; then
          echo "Failed to import library '$LIBRARY'. Please check if it is installed."
          exit 1
      else
          echo "Library '$LIBRARY' is installed and can be imported successfully."
          exit 0
      fi
