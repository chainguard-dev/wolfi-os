package:
  name: py3-requests-unixsocket
  version: 0.2.0
  epoch: 0
  description: Use requests to talk HTTP via a UNIX domain socket
  copyright:
    - license: Apache-2.0
  dependencies:
    runtime:
      - py3-requests

environment:
  contents:
    packages:
      - busybox
      - py3-pip
      - py3-setuptools
      - python3

pipeline:
  - uses: git-checkout
    with:
      repository: https://github.com/msabramo/requests-unixsocket
      tag: ${{package.version}}
      expected-commit: f4703e02e0c894ece5b2c5d69f647c9b8c3716db

  - runs: |
      python3 setup.py bdist_wheel

  - runs: |
      python3 setup.py install --prefix=/usr --root="${{targets.destdir}}" --skip-build

  - uses: strip

update:
  enabled: true
  github:
    identifier: msabramo/requests-unixsocket
    use-tag: true

test:
  environment:
    contents:
      packages:
        - python3
  pipeline:
    - uses: python/import
      with:
        python: python3
        import: requests_unixsocket
