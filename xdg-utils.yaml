package:
  name: xdg-utils
  version: 1.1.3
  epoch: 0
  description: Basic desktop integration functions
  copyright:
    - license: MIT

environment:
  contents:
    packages:
      - autoconf
      - automake
      - bash
      - build-base
      - busybox
      - libxml2-utils
      - libxslt
      - lynx
      - perl
      - xmlto
      - file
      - xprop
      - xset

pipeline:
  - uses: fetch
    with:
      expected-sha256: d798b08af8a8e2063ddde6c9fa3398ca81484f27dec642c5627ffcaa0d4051d9
      uri: https://portland.freedesktop.org/download/xdg-utils-${{package.version}}.tar.gz

  # patches from https://git.alpinelinux.org/aports/tree/community/xdg-utils?h=master
  - uses: patch
    with:
      patches: xdg-screensaver-mv-T.patch

  - uses: patch
    with:
      patches: deprecated-grep.patch

  # - uses: autoconf/configure
    # with:
    #   opts: |
    #     --prefix=/usr \
    #     --sysconfdir=/etc \
    #     --mandir=/usr/share/man \
    #     --infodir=/usr/share/info

  # - uses: autoconf/make

  - runs: |
      ./configure \
        --prefix=/usr \
        --sysconfdir=/etc \
        --mandir=/usr/share/man \
        --infodir=/usr/share/info
      make
      make DESTDIR="${{targets.destdir}}" install

  # - uses: autoconf/make-install

  - uses: strip

subpackages:
  - name: "xdg-utils-doc"
    description: "xdg-utils documentation"
    pipeline:
      - uses: split/manpages

update:
  enabled: true
  release-monitor:
    identifier: 5176
