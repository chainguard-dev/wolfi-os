package:
  name: osquery-toolchain
  version: "1.1.0"
  epoch: 
  description: Osquery-toolchain is a TODO
  copyright:
    - license: Apache-2.0 AND GPL-2.0-or-later

environment:
  contents:
    packages:
      - build-base
      - busybox
      - ca-certificates-bundle
      # - g++-8
      # - gcc-8
      - gcc-13
      - bash
      - automake
      - autoconf
      - gettext
      - bison
      - flex
      - unzip
      - help2man
      # - libtool-dev
      - libtool
      # - libncurses-dev
      - make
      - ninja-build
      - patch
      # - txinfo
      - gawk
      - wget
      - git
      - texinfo
      - xz
      - python3
      - cmake
      - file
      - ncurses
      - ncurses-dev


pipeline:
  - uses: git-checkout
    with:
      repository: https://github.com/osquery/osquery-toolchain
      tag: ${{package.version}}
      expected-commit: 8261e013f2ed3c872e1ac50d9c8e44bcf513fde0

  - runs: |
      ./build.sh /opt/osquery-toolchain

  - uses: strip

update:
  enabled: true
  github:
    identifier: osquery/osquery-toolchain

test:
  pipeline:
    - runs: |
        #test this
        exit 1
